{"version":3,"file":"Courses-ysBRUCIO.js","sources":["../../../../frontend/src/pages/Courses.vue"],"sourcesContent":["<template>\n\t<header\n\t\tclass=\"sticky top-0 z-10 flex items-center justify-between border-b bg-white px-3 py-2.5 sm:px-5\"\n\t>\n\t\t<Breadcrumbs\n\t\t\tclass=\"h-7\"\n\t\t\t:items=\"[{ label: __('All Courses'), route: { name: 'Courses' } }]\"\n\t\t/>\n\t\t<div class=\"flex\">\n\t\t\t<router-link\n\t\t\t\t:to=\"{\n\t\t\t\t\tname: 'CreateCourse',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tcourseName: 'new',\n\t\t\t\t\t},\n\t\t\t\t}\"\n\t\t\t>\n\t\t\t\t<Button v-if=\"user.data?.is_moderator\" variant=\"solid\">\n\t\t\t\t\t<template #prefix>\n\t\t\t\t\t\t<Plus class=\"h-4 w-4\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ __('New Course') }}\n\t\t\t\t</Button>\n\t\t\t</router-link>\n\t\t</div>\n\t</header>\n\t<div v-if=\"courses.data\">\n\t\t<div\n\t\t\tv-if=\"courses.data.length == 0 && courses.list.loading\"\n\t\t\tclass=\"p-5 text-base text-gray-700\"\n\t\t>\n\t\t\tLoading Courses...\n\t\t</div>\n\t\t<Tabs\n\t\t\tv-else\n\t\t\tv-model=\"tabIndex\"\n\t\t\t:tabs=\"tabs\"\n\t\t\ttablistClass=\"overflow-x-visible\"\n\t\t>\n\t\t\t<template #tab=\"{ tab, selected }\">\n\t\t\t\t<div>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"group -mb-px flex items-center gap-2 overflow-hidden border-b border-transparent py-2.5 text-base text-gray-600 duration-300 ease-in-out hover:border-gray-400 hover:text-gray-900\"\n\t\t\t\t\t\t:class=\"{ 'text-gray-900': selected }\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<component v-if=\"tab.icon\" :is=\"tab.icon\" class=\"h-5\" />\n\t\t\t\t\t\t{{ __(tab.label) }}\n\t\t\t\t\t\t<Badge theme=\"gray\">\n\t\t\t\t\t\t\t{{ tab.count }}\n\t\t\t\t\t\t</Badge>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<template #default=\"{ tab }\">\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"tab.courses && tab.courses.value.length\"\n\t\t\t\t\tclass=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-5 my-5 mx-5\"\n\t\t\t\t>\n\t\t\t\t\t<router-link\n\t\t\t\t\t\tv-for=\"course in tab.courses.value\"\n\t\t\t\t\t\t:to=\"course.membership && course.current_lesson\n\t\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\tname: 'Lesson',\n\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\tcourseName: course.name,\n\t\t\t\t\t\t\t\t\t\tchapterNumber: course.current_lesson.split('.')[0],\n\t\t\t\t\t\t\t\t\t\tlessonNumber: course.current_lesson.split('.')[1],\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t: course.membership\n\t\t\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t\tname: 'Lesson',\n\t\t\t\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t\t\t\tcourseName: course.name,\n\t\t\t\t\t\t\t\t\t\t\tchapterNumber: 1,\n\t\t\t\t\t\t\t\t\t\t\tlessonNumber: 1,\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t: {\n\t\t\t\t\t\t\t\t\t\tname: 'CourseDetail',\n\t\t\t\t\t\t\t\t\t\tparams: { courseName: course.name },\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<CourseCard :course=\"course\" />\n\t\t\t\t\t</router-link>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tv-else\n\t\t\t\t\tclass=\"grid flex-1 place-items-center text-xl font-medium text-gray-500\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"flex flex-col items-center justify-center mt-4\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t__('No {0} courses found').format(tab.label.toLowerCase())\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</Tabs>\n\t</div>\n</template>\n\n<script setup>\nimport { createListResource, Breadcrumbs, Tabs, Badge, Button } from 'frappe-ui'\nimport CourseCard from '@/components/CourseCard.vue'\nimport { Plus } from 'lucide-vue-next'\nimport { ref, computed, inject } from 'vue'\n\nconst user = inject('$user')\nconst courses = createListResource({\n\ttype: 'list',\n\tdoctype: 'LMS Course',\n\tcache: ['courses', user?.data?.email],\n\turl: 'lms.lms.utils.get_courses',\n\tauto: true,\n})\n\nconst tabIndex = ref(0)\nconst tabs = [\n\t{\n\t\tlabel: 'Live',\n\t\tcourses: computed(() => courses.data?.live || []),\n\t\tcount: computed(() => courses.data?.live?.length),\n\t},\n\t{\n\t\tlabel: 'Upcoming',\n\t\tcourses: computed(() => courses.data?.upcoming),\n\t\tcount: computed(() => courses.data?.upcoming?.length),\n\t},\n]\n\nif (user.data) {\n\ttabs.push({\n\t\tlabel: 'Enrolled',\n\t\tcourses: computed(() => courses.data?.enrolled),\n\t\tcount: computed(() => courses.data?.enrolled?.length),\n\t})\n\n\tif (\n\t\tuser.data.is_moderator ||\n\t\tuser.data.is_instructor ||\n\t\tcourses.data?.created?.length\n\t) {\n\t\ttabs.push({\n\t\t\tlabel: 'Created',\n\t\t\tcourses: computed(() => courses.data?.created),\n\t\t\tcount: computed(() => courses.data?.created?.length),\n\t\t})\n\t}\n\n\tif (user.data.is_moderator) {\n\t\ttabs.push({\n\t\t\tlabel: 'Under Review',\n\t\t\tcourses: computed(() => courses.data?.under_review),\n\t\t\tcount: computed(() => courses.data?.under_review?.length),\n\t\t})\n\t}\n}\n</script>\n"],"names":["user","inject","courses","createListResource","_a","tabIndex","ref","tabs","computed","_b","_c"],"mappings":"8yBA8GA,MAAMA,EAAOC,EAAO,OAAO,EACrBC,EAAUC,EAAmB,CAClC,KAAM,OACN,QAAS,aACT,MAAO,CAAC,WAAWC,EAAAJ,GAAA,YAAAA,EAAM,OAAN,YAAAI,EAAY,KAAK,EACpC,IAAK,4BACL,KAAM,EACP,CAAC,EAEKC,EAAWC,EAAI,CAAC,EAChBC,EAAO,CACZ,CACC,MAAO,OACP,QAASC,EAAS,IAAM,OAAA,QAAAJ,EAAAF,EAAQ,OAAR,YAAAE,EAAc,OAAQ,CAAA,EAAE,EAChD,MAAOI,EAAS,IAAM,SAAA,OAAAC,GAAAL,EAAAF,EAAQ,OAAR,YAAAE,EAAc,OAAd,YAAAK,EAAoB,OAAM,CAChD,EACD,CACC,MAAO,WACP,QAASD,EAAS,IAAA,OAAM,OAAAJ,EAAAF,EAAQ,OAAR,YAAAE,EAAc,SAAQ,EAC9C,MAAOI,EAAS,IAAM,SAAA,OAAAC,GAAAL,EAAAF,EAAQ,OAAR,YAAAE,EAAc,WAAd,YAAAK,EAAwB,OAAM,CACpD,CACF,EAEA,OAAIT,EAAK,OACRO,EAAK,KAAK,CACT,MAAO,WACP,QAASC,EAAS,IAAA,OAAM,OAAAJ,EAAAF,EAAQ,OAAR,YAAAE,EAAc,SAAQ,EAC9C,MAAOI,EAAS,IAAM,SAAA,OAAAC,GAAAL,EAAAF,EAAQ,OAAR,YAAAE,EAAc,WAAd,YAAAK,EAAwB,OAAM,CACtD,CAAE,GAGAT,EAAK,KAAK,cACVA,EAAK,KAAK,gBACVU,GAAAD,EAAAP,EAAQ,OAAR,YAAAO,EAAc,UAAd,MAAAC,EAAuB,SAEvBH,EAAK,KAAK,CACT,MAAO,UACP,QAASC,EAAS,IAAA,OAAM,OAAAJ,EAAAF,EAAQ,OAAR,YAAAE,EAAc,QAAO,EAC7C,MAAOI,EAAS,IAAM,SAAA,OAAAC,GAAAL,EAAAF,EAAQ,OAAR,YAAAE,EAAc,UAAd,YAAAK,EAAuB,OAAM,CACtD,CAAG,EAGET,EAAK,KAAK,cACbO,EAAK,KAAK,CACT,MAAO,eACP,QAASC,EAAS,IAAA,OAAM,OAAAJ,EAAAF,EAAQ,OAAR,YAAAE,EAAc,aAAY,EAClD,MAAOI,EAAS,IAAM,SAAA,OAAAC,GAAAL,EAAAF,EAAQ,OAAR,YAAAE,EAAc,eAAd,YAAAK,EAA4B,OAAM,CAC3D,CAAG"}